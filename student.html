<!DOCTYPE HTML>
<html>
<head>
        <link rel="stylesheet" href="lib/jqtouch.css" title="jQTouch">

        <!--<script src="../../src/lib/zepto.min.js" type="text/javascript" charset="utf-8"></script>-->
        <script src="lib/jqtouch.min.js" type="text/javascript" charset="utf-8"></script>
        <!-- Uncomment the following two lines (and comment out the previous two) to use jQuery instead of Zepto. -->
		<script src="lib/jquery-1.7.min.js" type="application/x-javascript" charset="utf-8"></script>
        <script src="lib/jqtouch-jquery.min.js" type="application/x-javascript" charset="utf-8"></script>

        <script type="text/javascript" charset="utf-8">
            var jQT = new $.jQTouch({});
            
		   $(function(){
                $('#raise_hand').tap(function(){
                    raiseHand();
                    //alert('hi');
                });
            });
        </script>

	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<script type="text/javascript">
		var webSocket;
		function connect() {
			webSocket = new WebSocket("ws://localhost:8081/");			 
			 webSocket.onopen = function() {
				
			 };
			 webSocket.onmessage = function (evt) { 
			 	// To clear participation
				var received_msg = evt.data;
				//alert(received_msg);
			 };
			 webSocket.onclose = function() { 
			 };
		}
		
		function raiseHand() {
			console.debug('1');
			// Should not be dependent on teacher's page being open
			if (webSocket == null) {
				console.debug('2');
				connect();
			}
			console.debug('3');
			var msg = "RAISE::" + $('input[id=name]').val();
			console.debug('4');
			webSocket.send(msg);
			console.debug('5');
		}
	</script>
</head>
<body>
	<div id="jqt">
		<div id="callbacks">
			<div class="toolbar">
				<h1>SPOT</h1>
	
		
			
		</div>
	
			<form>
				<ul class="edit rounded">
					<li><input id="name" type="text" value="Anonymous" onchange="connect()"/></li>
				</ul>
			</form>
				<ul class="rounded">
					<li><a href="#" class="whiteButton" id="raise_hand">Tap me!</a></li>
				</ul>
		</div>
		
		<div id="buttons">
	
	
	</div>
</body>
</html>